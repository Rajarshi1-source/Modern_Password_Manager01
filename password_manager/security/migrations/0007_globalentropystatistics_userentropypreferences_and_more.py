# Generated by Django 4.2.27 on 2026-01-30 15:33

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import uuid


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('auth', '0012_alter_user_first_name_max_length'),
        ('security', '0006_capsulebeneficiary_escrowagreement_passwordwill_and_more'),
    ]

    operations = [
        migrations.CreateModel(
            name='GlobalEntropyStatistics',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('ocean_active_buoys', models.IntegerField(default=0)),
                ('ocean_total_fetches_24h', models.IntegerField(default=0)),
                ('ocean_average_quality', models.FloatField(default=0.0)),
                ('lightning_strikes_24h', models.BigIntegerField(default=0)),
                ('lightning_active_regions', models.JSONField(default=list)),
                ('lightning_total_fetches_24h', models.IntegerField(default=0)),
                ('seismic_events_24h', models.IntegerField(default=0)),
                ('seismic_largest_magnitude_24h', models.FloatField(default=0.0)),
                ('seismic_total_fetches_24h', models.IntegerField(default=0)),
                ('solar_current_speed_kmps', models.FloatField(default=0.0)),
                ('solar_storm_level', models.CharField(default='quiet', max_length=20)),
                ('solar_total_fetches_24h', models.IntegerField(default=0)),
                ('total_passwords_24h', models.IntegerField(default=0)),
                ('total_entropy_bytes_24h', models.BigIntegerField(default=0)),
                ('average_sources_per_password', models.FloatField(default=0.0)),
                ('recorded_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Global Entropy Statistics',
                'verbose_name_plural': 'Global Entropy Statistics',
                'db_table': 'global_entropy_statistics',
                'ordering': ['-recorded_at'],
                'get_latest_by': 'recorded_at',
            },
        ),
        migrations.CreateModel(
            name='UserEntropyPreferences',
            fields=[
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, primary_key=True, related_name='entropy_preferences', serialize=False, to=settings.AUTH_USER_MODEL)),
                ('use_quantum', models.BooleanField(default=True)),
                ('use_ocean', models.BooleanField(default=True)),
                ('use_lightning', models.BooleanField(default=True)),
                ('use_seismic', models.BooleanField(default=True)),
                ('use_solar', models.BooleanField(default=True)),
                ('use_genetic', models.BooleanField(default=False)),
                ('min_sources_required', models.IntegerField(default=2)),
                ('notify_on_rare_events', models.BooleanField(default=True)),
                ('total_passwords_generated', models.IntegerField(default=0)),
                ('favorite_source_combination', models.JSONField(default=list)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'User Entropy Preferences',
                'db_table': 'user_entropy_preferences',
            },
        ),
        migrations.CreateModel(
            name='SolarWindEntropyBatch',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('readings_used', models.IntegerField(help_text='Number of readings used')),
                ('average_speed_kmps', models.FloatField(help_text='Average solar wind speed in km/s')),
                ('peak_speed_kmps', models.FloatField(help_text='Peak solar wind speed in km/s')),
                ('average_density', models.FloatField(help_text='Average proton density (per cmÂ³)')),
                ('average_temperature_k', models.FloatField(help_text='Average temperature in Kelvin')),
                ('bx_nt', models.FloatField(default=0.0, help_text='Magnetic field X component (nT)')),
                ('by_nt', models.FloatField(default=0.0, help_text='Magnetic field Y component (nT)')),
                ('bz_nt', models.FloatField(default=0.0, help_text='Magnetic field Z component (nT)')),
                ('b_total_nt', models.FloatField(default=0.0, help_text='Total magnetic field magnitude (nT)')),
                ('storm_level', models.CharField(choices=[('quiet', 'Quiet'), ('moderate', 'Moderate'), ('active', 'Active'), ('storm', 'Storm')], default='quiet', max_length=20)),
                ('bytes_fetched', models.IntegerField()),
                ('quality_score', models.FloatField(help_text='Entropy quality score (0.0-1.0)')),
                ('readings_timestamp_start', models.DateTimeField(blank=True, null=True)),
                ('readings_timestamp_end', models.DateTimeField(blank=True, null=True)),
                ('fetched_at', models.DateTimeField(auto_now_add=True)),
                ('fetch_duration_ms', models.IntegerField(blank=True, null=True)),
                ('satellite_source', models.CharField(default='DSCOVR', max_length=50)),
            ],
            options={
                'verbose_name': 'Solar Wind Entropy Batch',
                'verbose_name_plural': 'Solar Wind Entropy Batches',
                'db_table': 'solar_wind_entropy_batch',
                'ordering': ['-fetched_at'],
                'indexes': [models.Index(fields=['-fetched_at'], name='solar_wind__fetched_7fe6e6_idx'), models.Index(fields=['storm_level'], name='solar_wind__storm_l_b076d8_idx')],
            },
        ),
        migrations.CreateModel(
            name='SeismicEntropyBatch',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('events_used', models.IntegerField(help_text='Number of earthquakes used')),
                ('largest_magnitude', models.FloatField(help_text='Largest earthquake magnitude')),
                ('average_magnitude', models.FloatField(help_text='Average magnitude across events')),
                ('magnitude_type', models.CharField(default='Mw', max_length=20)),
                ('primary_region', models.CharField(blank=True, max_length=255)),
                ('epicenter_latitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('epicenter_longitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('depth_km', models.FloatField(blank=True, null=True)),
                ('bytes_fetched', models.IntegerField()),
                ('quality_score', models.FloatField(help_text='Entropy quality score (0.0-1.0)')),
                ('events_timestamp_start', models.DateTimeField(blank=True, null=True)),
                ('events_timestamp_end', models.DateTimeField(blank=True, null=True)),
                ('fetched_at', models.DateTimeField(auto_now_add=True)),
                ('fetch_duration_ms', models.IntegerField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Seismic Entropy Batch',
                'verbose_name_plural': 'Seismic Entropy Batches',
                'db_table': 'seismic_entropy_batch',
                'ordering': ['-fetched_at'],
                'indexes': [models.Index(fields=['-fetched_at'], name='seismic_ent_fetched_f52bba_idx'), models.Index(fields=['-largest_magnitude'], name='seismic_ent_largest_88c745_idx')],
            },
        ),
        migrations.CreateModel(
            name='LightningEntropyBatch',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('strikes_used', models.IntegerField(help_text='Number of lightning strikes used')),
                ('peak_intensity_ka', models.FloatField(help_text='Peak current in kiloamperes')),
                ('average_intensity_ka', models.FloatField(help_text='Average intensity across strikes')),
                ('strike_region', models.CharField(blank=True, max_length=255)),
                ('center_latitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('center_longitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('bytes_fetched', models.IntegerField()),
                ('quality_score', models.FloatField(help_text='Entropy quality score (0.0-1.0)')),
                ('strikes_timestamp_start', models.DateTimeField(blank=True, null=True)),
                ('strikes_timestamp_end', models.DateTimeField(blank=True, null=True)),
                ('fetched_at', models.DateTimeField(auto_now_add=True)),
                ('fetch_duration_ms', models.IntegerField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Lightning Entropy Batch',
                'verbose_name_plural': 'Lightning Entropy Batches',
                'db_table': 'lightning_entropy_batch',
                'ordering': ['-fetched_at'],
                'indexes': [models.Index(fields=['-fetched_at'], name='lightning_e_fetched_87533c_idx'), models.Index(fields=['-quality_score'], name='lightning_e_quality_f4b522_idx')],
            },
        ),
        migrations.CreateModel(
            name='NaturalEntropyCertificate',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('password_hash_prefix', models.CharField(help_text='First 16 chars of SHA256 hash', max_length=64)),
                ('sources_used', models.JSONField(default=list, help_text='List of sources used')),
                ('ocean_batch_id', models.UUIDField(blank=True, null=True)),
                ('lightning_batch_id', models.UUIDField(blank=True, null=True)),
                ('seismic_batch_id', models.UUIDField(blank=True, null=True)),
                ('solar_batch_id', models.UUIDField(blank=True, null=True)),
                ('quantum_certificate_id', models.UUIDField(blank=True, null=True)),
                ('ocean_details', models.JSONField(blank=True, default=dict)),
                ('lightning_details', models.JSONField(blank=True, default=dict)),
                ('seismic_details', models.JSONField(blank=True, default=dict)),
                ('solar_details', models.JSONField(blank=True, default=dict)),
                ('mixing_algorithm', models.CharField(default='XOR + SHA3-512 + SHAKE256', max_length=100)),
                ('total_entropy_bits', models.IntegerField()),
                ('password_length', models.IntegerField()),
                ('charset_used', models.CharField(default='standard', max_length=100)),
                ('combined_quality_score', models.FloatField(help_text='Combined quality score (0.0-1.0)')),
                ('individual_quality_scores', models.JSONField(default=dict)),
                ('generation_timestamp', models.DateTimeField(auto_now_add=True)),
                ('signature', models.CharField(max_length=256)),
                ('vault_item_id', models.CharField(blank=True, max_length=100, null=True)),
                ('service_name', models.CharField(blank=True, max_length=255)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='natural_certificates', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Natural Entropy Certificate',
                'verbose_name_plural': 'Natural Entropy Certificates',
                'db_table': 'natural_entropy_certificate',
                'ordering': ['-generation_timestamp'],
                'indexes': [models.Index(fields=['user', '-generation_timestamp'], name='natural_ent_user_id_4be645_idx'), models.Index(fields=['password_hash_prefix'], name='natural_ent_passwor_709db2_idx')],
            },
        ),
    ]
